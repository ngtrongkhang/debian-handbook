<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>5.3. Cấu trúc của Gói nguồn</title><meta name="generator" content="publican v4.3.2"/><meta name="keywords" content="Gói nhị phân, Gói mã nguồn, dpkg, dependencies, conflict"/><link rel="prev" href="sect.package-meta-information.html" title="5.2. Package Meta-Information"/><link rel="next" href="sect.manipulating-packages-with-dpkg.html" title="5.4. Thao tác các gói với dpkg"/><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.source-package-structure.html"/></head><body onLoad="initSwitchery(); jQuery(&quot;#poptoc&quot;).load('index.html .toc:eq(0)'); jQuery('.programlisting').each(function(i, block){hljs.highlightBlock(block);});" onClick="hide('poptoc');"><header><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.package-meta-information.html"><strong>Trước đó</strong></a></li><li class="home" onClick="work=1;showhide('poptoc');">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.manipulating-packages-with-dpkg.html"><strong>Kế tiếp</strong></a></li></ul></header><div id="poptoc" class="hidden"> </div><section class="section" id="sect.source-package-structure"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.source-package-structure"/>5.3. Cấu trúc của Gói nguồn</h2></div></div></div>
		
		 <a id="id-1.8.7.2" class="indexterm"></a>
		 <a id="id-1.8.7.3" class="indexterm"></a>
		 <section class="section" id="id-1.8.7.4"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.8.7.4"/>5.3.1. Định dạng</h3></div></div></div>
			
			 <a id="id-1.8.7.4.2" class="indexterm"></a>
			 <a id="id-1.8.7.4.3" class="indexterm"></a>
			 <a id="id-1.8.7.4.4" class="indexterm"></a>
			 <a id="id-1.8.7.4.5" class="indexterm"></a>
			 <p>
				Gói nguồn thường bao gồm ba tệp tin, là <code class="filename">.dsc</code>, <code class="filename">orig.tar.gz </code>, và <code class="filename">.debian.tar.gz</code> (hoặc <code class="filename">.diff.gz </code>). Chúng cho phép tạo các gói nhị phân (<code class="filename">.deb</code> các tệp được mô tả ở trên) từ tệp mã nguồn của chương trình, được viết bằng ngôn ngữ lập trình.
			</p>
			 <p>
				Tệp <code class="filename">.dsc</code> (Debian Source Control) là một tệp văn bản ngắn chứa tiêu đề RFC 2822 (giống như tệp <code class="filename">control</code> được nghiên cứu trong <a class="xref" href="sect.package-meta-information.html#sect.control" title="5.2.1. Mô tả: tệp tin control">Phần 5.2.1, “Mô tả: tệp tin <code class="filename">control</code>”</a>) nó mô tả gói nguồn và cho biết tệp nào là một phần của nó. Nó được ký bởi người bảo trì của nó, để đảm bảo tính xác thực. Xem <a class="xref" href="sect.package-authentication.html" title="6.5. Kiểm tra Tính xác thực Gói">Phần 6.5, “Kiểm tra Tính xác thực Gói”</a> để biết thêm chi tiết về chủ đề này.
			</p>
			 <div class="example" id="id-1.8.7.4.8"><a xmlns="" id="id-1.8.7.4.8"/><p class="title"><strong>Ví dụ 5.1. Tệp tin <code class="filename">.dsc</code></strong></p><div class="example-contents">
				
				 
<pre class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.62-3
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.6
Vcs-Browser: http://anonscm.debian.org/gitweb/?p=collab-maint/zim.git
Vcs-Git: git://anonscm.debian.org/collab-maint/zim.git
Build-Depends: debhelper (&gt;= 9), xdg-utils, python (&gt;= 2.6.6-3~), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg
Package-List:
 zim deb x11 optional arch=all
Checksums-Sha1:
 ad8de170826682323c10195b65b9f1243fd75637 1772246 zim_0.62.orig.tar.gz
 a4f70d6f7fb404022c9cc4870a4e62ea3ca08388 14768 zim_0.62-3.debian.tar.xz
Checksums-Sha256:
 19d62aebd2c1a92d84d80720c6c1dcdb779c39a2120468fed01b7f252511bdc2 1772246 zim_0.62.orig.tar.gz
 fc2e827e83897d5e33f152f124802c46c3c01c5158b75a8275a27833f1f6f1de 14768 zim_0.62-3.debian.tar.xz
Files:
 43419efba07f7086168442e3d698287a 1772246 zim_0.62.orig.tar.gz
 725a69663a6c2961f07673ae541298e4 14768 zim_0.62-3.debian.tar.xz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
Comment: Signed by Raphael Hertzog

iQEcBAEBCAAGBQJUR2jqAAoJEAOIHavrwpq5WFcH/RsdzCHc1oXXxHitU23hEqMj
T6ok29M1UFDJDowMXW75jQ1nT4WPUtvEGygkCHeoO/PvjEvB0sjU8GQlX+N9ddSB
aHfqfAYmVhADNGxrXQT5inZXUa8qGeeq2Sqf6YcWtsnuD56lDbvxkyf/XYopoIEl
oltfl05z/AI+vYsW482YrCz0fxNAKAvkyuPhDebYI8jnKWeAANoqmKpsNc/HYyvT
+ZiA5o57OiGdOKT6XGy3/FiF3dkHiRY8lXW7xdr1BbIgulwl9UmiUNwuxwOYbQO7
edtjiTJqOaFUA0x1zB/XGv5tHr1MjP8naT+kfVoVHTOox51CDbeu5D3DZY4imcY=
=Wtoa
-----END PGP SIGNATURE-----</pre>

			</div></div>
			 <a id="id-1.8.7.4.9" class="indexterm"></a>
			 <p>
				Lưu ý rằng gói nguồn cũng có phụ thuộc (<code class="literal">Build-Depends</code>) nó hoàn toàn khác so với các gói nhị phân, vì chúng chỉ ra các công cụ cần thiết để biên dịch phần mềm được đề cập và xây dựng gói nhị phân của nó.
			</p>
			 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>CAUTION</em></span> Khoảng không tên riêng biệt</strong></p></div></div></div> 
			 <p>
				Điều quan trọng cần lưu ý ở đây là không có yêu cầu tương ứng giữa tên của gói nguồn và gói tin nhị phân mà nó tạo ra. Có thể dễ hiểu nếu bạn biết rằng mỗi gói nguồn có thể tạo ra một số gói nhị phân. Đây là lý do tại sao tệp tin <code class="filename">.dsc</code> có trường <code class="literal">Source</code> và <code class="literal">Binary</code> để nêu rõ tên gói nguồn và danh sách các gói nhị phân mà nó tạo ra.
			</p>
			 </div> <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>CULTURE</em></span> Tại sao chia thành nhiều gói</strong></p></div></div></div> 
			 <p>
				Rất thường xuyên, gói nguồn (cho một phần mềm nhất định) có thể tạo ra vài gói nhị phân. Sự phân chia này là hợp lý bởi khả năng sử dụng (phần của) phần mềm trong các ngữ cảnh khác nhau. Xem xét một thư viện chia sẻ, nó có thể được cài đặt để thực hiện công việc ứng dụng (ví dụ: <span class="pkg pkg">libc6</span>), hoặc nó có thể được cài đặt để phát triển một chương trình mới (<span class="pkg pkg">libc6-dev</span> sau đó sẽ là gói chính xác). Chúng ta tìm thấy cùng một logic cho các dịch vụ client/server, nơi chúng ta muốn cài đặt phần server trên một máy và phần client trên các máy khác (ví dụ: <span class="pkg pkg">openssh-server</span> và <span class="pkg pkg">openssh-client</span>).
			</p>
			 <p>
				Hay thường xuyên các tài liệu được cung cấp trong một gói phần mềm chuyên dụng: người dùng có thể cài đặt nó độc lập với phần mềm, và có thể tại bất kỳ thời điểm nào chọn để loại bỏ nó để tiết kiệm không gian ổ cứng. Ngoài ra, điều này cũng tiết kiệm không gian ổ cứng trên mirror Debian, vì gói tài liệu sẽ được chia sẻ giữa tất cả các kiến trúc (thay vì có các tài liệu được nhân đôi trong các gói cho mỗi kiến trúc khác nhau).
			</p>
			 </div> <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>PERSPECTIVE</em></span> Định dạng gói nguồn khác nhau</strong></p></div></div></div> 
			 <p>
				Ban đầu chỉ có một định dạng gói nguồn. Đó là định dạng <code class="literal">1.0</code>, kết hợp tệp <code class="filename">.orig.tar.gz </code> và một <code class="filename">.diff.gz</code> bản vá “debianization” (hay là một tệp tin nén <code class="filename">.tar.gz</code> duy nhất, được sử dụng tự động nếu không có tệp <code class="filename">.orig.tar.gz</code>).
			</p>
			 <p>
				Từ Debian phiên bản <span class="distribution distribution">Squeeze</span>, các nhà phát triển Debian có thể sử dụng định dạng mới để sửa đổi nhiều vấn đề về định dạng cũ. Định dạng <code class="literal">3.0(quilt)</code> có thể kết hợp nhiều lưu trữ thượng nguồn trong cùng một gói nguồn: thêm vào <code class="filename">.orig.tar.gz</code>, bổ sung <code class="filename">.orig-<em class="replaceable">component</em>.tar.gz</code> nếu có thể. Điều này rất hữu ích với phần mềm được phân phối trong một số thành phần thượng nguồn mà chỉ cần một gói nguồn duy nhất. Các tệp nén này có thể được nén với <span class="command"><strong>bzip2</strong></span> hoặc <span class="command"><strong>xz</strong></span> chứ không phải là <span class="command"><strong>gzip</strong></span>, tiết kiệm không gian ổ cứng và tài nguyên mạng. Cuối cùng, miếng vá đồng nhất, <code class="filename">.diff.gz</code> được thay thế bởi một tệp nén<code class="filename">.debian.tar.gz</code> chứa các lệnh biên dịch và tập hợp miếng vá đóng góp của người bảo trì gói. Những mục cuối này được ghi lại theo một định dạng tương thích với <code class="filename">quilt</code> - một công cụ giúp quản lý một loạt các bản vá lỗi.
			</p>
			 </div> <p>
				Tệp <code class="filename">.orig.tar.gz</code> là tệp nén chứa mã nguồn do nhà phát triển ban đầu cung cấp. Người bảo trì gói Debian được yêu cầu không sửa đổi tệp này để có thể dễ dàng kiểm tra nguồn gốc và tính toàn vẹn của tệp (bằng so sánh đơn giản với checksums) và tôn trọng mong muốn của một số tác giả.
			</p>
			 <p>
				Các <code class="filename">.debian.tar.gz</code> chứa tất cả các sửa đổi được thực hiện bởi người bảo trì Debian, đặc biệt là bổ sung thư mục <code class="filename">debian</code>, thư mục chứa các hướng dẫn để thực hiện xây dựng một gói Debian.
			</p>
			 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>TOOL</em></span> Giải nén gói nguồn</strong></p></div></div></div> 
			 <a id="id-1.8.7.4.16.2" class="indexterm"></a>
			 <a id="id-1.8.7.4.16.3" class="indexterm"></a>
			 <a id="id-1.8.7.4.16.4" class="indexterm"></a>
			 <a id="id-1.8.7.4.16.5" class="indexterm"></a>
			 <p>
				Nếu bạn có một gói nguồn, bạn có thể sử dụng lệnh <span class="command"><strong>dpkg-source</strong></span> (từ gói <span class="pkg pkg">dpkg-dev</span>) để giải nén nó:
			</p>
			 
<pre class="screen"><code class="computeroutput"> $ </code><strong class="userinput"><code> dpkg-source -x package_0.7-1.dsc </code></strong></pre>
			 <p>
				Bạn cũng có thể sử dụng <span class="command"><strong>apt-get</strong></span> để tải xuống một gói nguồn và giải nén nó ngay. Nó yêu cầu các dòng <code class="literal">deb-src</code> có trong tập tin <code class="literal">/etc/apt/sources.list</code> (để biết thêm chi tiết, xem <a class="xref" href="apt.html#sect.apt-sources.list" title="6.1. Thêm nội dung vào tệp sources.list">Phần 6.1, “Thêm nội dung vào tệp <code class="filename">sources.list</code>”</a>). Chúng được sử dụng để liệt kê “nguồn” của các gói nguồn (nghĩa là các máy chủ mà trên đó một nhóm các gói nguồn được lưu trữ).
			</p>
			 
<pre class="screen"><code class="computeroutput">$ </code><strong class="userinput"><code>apt-get source <em class="replaceable">package</em></code></strong></pre>
			 </div>
		</section>
		 <section class="section" id="id-1.8.7.5"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.8.7.5"/>5.3.2. Cách sử dụng trong Debian</h3></div></div></div>
			
			 <p>
				Gói nguồn là nền tảng của mọi thứ trong Debian. Tất cả các gói Debian đều đến từ một gói nguồn, và mỗi sửa đổi trong một gói Debian là kết quả của một sửa đổi đối với gói nguồn. Các nhà bảo trì Debian làm việc với gói nguồn, tuy nhiên biết được hậu quả của hành động của họ đối với các gói nhị phân. Các thành quả của công việc của họ được tìm thấy trong các gói nguồn có sẵn từ Debian: bạn có thể dễ dàng quay lại gói nguồn và mọi thứ bắt nguồn từ chúng.
			</p>
			 <p>
				Khi một phiên bản mới của gói (gói nguồn và một hoặc nhiều gói nhị phân) xuất hiện trên máy chủ Debian, gói nguồn là quan trọng nhất. Thật vậy, nó sẽ được sử dụng bởi một mạng lưới các máy của các kiến trúc khác nhau để biên dịch trên các kiến trúc đó được hỗ trợ bởi Debian. Thực tế là nhà phát triển cũng gửi một hoặc nhiều gói nhị phân cho một kiến trúc nhất định (thường là i386 hoặc amd64) là tương đối không quan trọng vì chúng cũng có thể được tạo tự động.
			</p>

		</section>

	</section><footer/></body></html>