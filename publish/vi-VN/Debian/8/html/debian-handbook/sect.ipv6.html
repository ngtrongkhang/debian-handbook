<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>10.5. IPv6</title><meta name="generator" content="publican v4.3.2"/><meta name="keywords" content="Network, Gateway, TCP/IP, IPv6, DNS, Bind, DHCP, QoS"/><link rel="prev" href="sect.dynamic-routing.html" title="10.4. Dynamic Routing"/><link rel="next" href="sect.domain-name-servers.html" title="10.6. Domain Name Servers (DNS)"/><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.ipv6.html"/></head><body onLoad="initSwitchery(); jQuery(&quot;#poptoc&quot;).load('index.html .toc:eq(0)'); jQuery('.programlisting').each(function(i, block){hljs.highlightBlock(block);});" onClick="hide('poptoc');"><header><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.dynamic-routing.html"><strong>Trước đó</strong></a></li><li class="home" onClick="work=1;showhide('poptoc');">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.domain-name-servers.html"><strong>Kế tiếp</strong></a></li></ul></header><div id="poptoc" class="hidden"> </div><section class="section" id="sect.ipv6"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.ipv6"/>10.5. IPv6</h2></div></div></div>
		
		 <p>
			IPv6, successor to IPv4, is a new version of the IP protocol designed to fix its flaws, most notably the scarcity of available IP addresses. This protocol handles the network layer; its purpose is to provide a way to address machines, to convey data to their intended destination, and to handle data fragmentation if needed (in other words, to split packets into chunks with a size that depends on the network links to be used on the path and to reassemble the chunks in their proper order on arrival).
		</p>
		 <p>
			Debian kernels include IPv6 handling in the core kernel (with the exception of some architectures that have it compiled as a module named <code class="literal">ipv6</code>). Basic tools such as <span class="command"><strong>ping</strong></span> and <span class="command"><strong>traceroute</strong></span> have their IPv6 equivalents in <span class="command"><strong>ping6</strong></span> and <span class="command"><strong>traceroute6</strong></span>, available respectively in the <span class="pkg pkg">iputils-ping</span> and <span class="pkg pkg">iputils-tracepath</span> packages.
		</p>
		 <a id="id-1.13.8.4" class="indexterm"></a>
		 <a id="id-1.13.8.5" class="indexterm"></a>
		 <a id="id-1.13.8.6" class="indexterm"></a>
		 <p>
			The IPv6 network is configured similarly to IPv4, in <code class="filename">/etc/network/interfaces</code>. But if you want that network to be globally available, you must ensure that you have an IPv6-capable router relaying traffic to the global IPv6 network.
		</p>
		 <div class="example" id="example.network-interfaces-ipv6"><a xmlns="" id="example.network-interfaces-ipv6"/><p class="title"><strong>Ví dụ 10.10. Example of IPv6 configuration</strong></p><div class="example-contents">
			
			 
<pre class="programlisting">
iface eth0 inet6 static
    address 2001:db8:1234:5::1:1
    netmask 64
    # Disabling auto-configuration
    # autoconf 0
    # The router is auto-configured and has no fixed address
    # (accept_ra 1). If it had:
    # gateway 2001:db8:1234:5::1
</pre>

		</div></div>
		 <p>
			IPv6 subnets usually have a netmask of 64 bits. This means that 2<sup>64</sup> distinct addresses exist within the subnet. This allows Stateless Address Autoconfiguration (<abbr class="acronym">SLAAC</abbr>) to pick an address based on the network interface's MAC address. By default, if <abbr class="acronym">SLAAC</abbr> is activated in your network and IPv6 on your computer, the kernel will automatically find IPv6 routers and configure the network interfaces.
		</p>
		 <p>
			This behavior may have privacy implications. If you switch networks frequently, e.g. with a laptop, you might not want your <abbr class="acronym">MAC</abbr> address being a part of your public IPv6 address. This makes it easy to identify the same device across networks. A solution to this are IPv6 privacy extensions (which Debian enables by default if IPv6 connectivity is detected during initial installation), which will assign an additional randomly generated address to the interface, periodically change them and prefer them for outgoing connections. Incoming connections can still use the address generated by SLAAC. The following example, for use in <code class="filename">/etc/network/interfaces</code>, activates these privacy extensions.
		</p>
		 <div class="example" id="example.network-interface-ipv6-privext"><a xmlns="" id="example.network-interface-ipv6-privext"/><p class="title"><strong>Ví dụ 10.11. IPv6 privacy extensions</strong></p><div class="example-contents">
			
			 
<pre class="programlisting">
iface eth0 inet6 auto
    # Prefer the randomly assigned addresses for outgoing connections.
    privext 2
</pre>

		</div></div>
		 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>TIP</em></span> Programs built with IPv6</strong></p></div></div></div> 
		 <p>
			Many pieces of software need to be adapted to handle IPv6. Most of the packages in Debian have been adapted already, but not all. If your favorite package does not work with IPv6 yet, you can ask for help on the <span class="emphasis"><em>debian-ipv6</em></span> mailing-list. They might know about an IPv6-aware replacement and could file a bug to get the issue properly tracked. <a class="ulink" href="http://lists.debian.org/debian-ipv6/">http://lists.debian.org/debian-ipv6/</a>
		</p>
		 </div> <a id="id-1.13.8.13" class="indexterm"></a>
		 <a id="id-1.13.8.14" class="indexterm"></a>
		 <a id="id-1.13.8.15" class="indexterm"></a>
		 <p>
			IPv6 connections can be restricted, in the same fashion as for IPv4: the standard Debian kernels include an adaptation of <span class="emphasis"><em>netfilter</em></span> for IPv6. This IPv6-enabled <span class="emphasis"><em>netfilter</em></span> is configured in a similar fashion to its IPv4 counterpart, except the program to use is <span class="command"><strong>ip6tables</strong></span> instead of <span class="command"><strong>iptables</strong></span>.
		</p>
		 <section class="section" id="sect.ipv6-tunneling"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.ipv6-tunneling"/>10.5.1. Tunneling</h3></div></div></div>
			
			 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>CAUTION</em></span> IPv6 tunneling and firewalls</strong></p></div></div></div> 
			 <p>
				IPv6 tunneling over IPv4 (as opposed to native IPv6) requires the firewall to accept the traffic, which uses IPv4 protocol number 41.
			</p>
			 </div> <p>
				If a native IPv6 connection is not available, the fallback method is to use a tunnel over IPv4. Gogo6 is one (free) provider of such tunnels: <a class="ulink" href="http://www.gogo6.com/freenet6/tunnelbroker">http://www.gogo6.com/freenet6/tunnelbroker</a>
			</p>
			 <a id="id-1.13.8.17.4" class="indexterm"></a>
			 <a id="id-1.13.8.17.5" class="indexterm"></a>
			 <p>
				To use a Freenet6 tunnel, you need to register for a Freenet6 Pro account on the website, then install the <span class="pkg pkg">gogoc</span> package and configure the tunnel. This requires editing the <code class="filename">/etc/gogoc/gogoc.conf</code> file: <code class="literal">userid</code> and <code class="literal">password</code> lines received by e-mail should be added, and <code class="literal">server</code> should be replaced with <code class="literal">authenticated.freenet6.net</code>.
			</p>
			 <p>
				IPv6 connectivity is proposed to all machines on a local network by adding the three following directives to the <code class="filename">/etc/gogoc/gogoc.conf</code> file (assuming the local network is connected to the eth0 interface):
			</p>
			 
<pre class="programlisting">
host_type=router
prefixlen=56
if_prefix=eth0
</pre>
			 <p>
				The machine then becomes the access router for a subnet with a 56-bit prefix. Once the tunnel is aware of this change, the local network must be told about it; this implies installing the <span class="command"><strong>radvd</strong></span> daemon (from the similarly-named package). This IPv6 configuration daemon has a role similar to <span class="command"><strong>dhcpd</strong></span> in the IPv4 world.
			</p>
			 <p>
				The <code class="filename">/etc/radvd.conf</code> configuration file must then be created (see <code class="filename">/usr/share/doc/radvd/examples/simple-radvd.conf</code> as a starting point). In our case, the only required change is the prefix, which needs to be replaced with the one provided by Freenet6; it can be found in the output of the <span class="command"><strong>ifconfig</strong></span> command, in the block concerning the <code class="literal">tun</code> interface.
			</p>
			 <a id="id-1.13.8.17.11" class="indexterm"></a>
			 <p>
				Then run <span class="command"><strong>service gogoc restart</strong></span> and <span class="command"><strong>service radvd start</strong></span>, and the IPv6 network should work.
			</p>

		</section>

	</section><footer/></body></html>