<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">8.2. Cấu hình Mạng</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Debian-debian-handbook-8-vi-VN-1.0-1" /><meta name="keywords" content="Cấu hình, Nội địa hoá, Bản địa, Mạng, Độ phân giải tên, Người sử dụng, Các nhóm, Tài khoản, Thông dịch bằng dòng lệnh, Shell, In, Bộ tải khởi động, Biên dịch hạt nhân" /><link rel="home" href="index.html" title="Sổ tay Quản trị Debian" /><link rel="up" href="basic-configuration.html" title="Chương 8. Cấu hình cơ bản: Mạng, Tài khoản, In ấn..." /><link rel="prev" href="basic-configuration.html" title="Chương 8. Cấu hình cơ bản: Mạng, Tài khoản, In ấn..." /><link rel="next" href="sect.hostname-name-service.html" title="8.3. Setting the Hostname and Configuring the Name Service" /><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.network-config.html" /></head><body><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><p id="title"><a class="left" href="http://www.debian.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="index.html"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="basic-configuration.html"><strong>Trước đó</strong></a></li><li class="home">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.hostname-name-service.html"><strong>Kế tiếp</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.network-config"></a>8.2. Cấu hình Mạng</h2></div></div></div><div class="sidebar"><a xmlns="" id="sidebar.networking-basics"></a><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>BACK TO BASICS</em></span> Các khái niệm khái quát về mạng (Ethernet, địa chỉ IP, subnet, broadcast)</strong></p></div></div></div><a id="id-1.11.6.2.2" class="indexterm"></a><a id="id-1.11.6.2.3" class="indexterm"></a><a id="id-1.11.6.2.4" class="indexterm"></a><a id="id-1.11.6.2.5" class="indexterm"></a><a id="id-1.11.6.2.6" class="indexterm"></a><a id="id-1.11.6.2.7" class="indexterm"></a><a id="id-1.11.6.2.8" class="indexterm"></a><div class="para">
			Hầu hết các mạng nội bộ hiện đại đều sử dụng giao thức Ethernet, nơi dữ liệu được chia thành các khối nhỏ gọi là khung và truyền đi trên một dây một khung. Tốc độ truyền dữ liệu khác nhau từ 10 Mb/ s cho các card Ethernet cũ đến 10 Gb/s đối với loại mới nhất (tỷ lệ phổ biến nhất đang tăng lên từ 100 Mb/s đến 1 Gb/s). Các loại cáp được sử dụng rộng rãi nhất được gọi là 10BASE-T, 100BASE-T, 1000BASE-T hoặc 10GBASE-T tùy thuộc vào công suất mà mạng lưới có thể cung cấp (T là viết tắt của “twisted pair” (xoắn đôi)); các loại cáp này kết thúc bằng đầu nối RJ45. Có những loại cáp khác, được sử dụng chủ yếu cho tốc độ 1 Gb/s hoặc cũng được dùng như trên.
		</div><a id="id-1.11.6.2.10" class="indexterm"></a><a id="id-1.11.6.2.11" class="indexterm"></a><div class="para">
			Một địa chỉ IP là một số sử dụng để định danh một giao diện mạng trên một máy tính trong một mạng máy tính cục bộ hoặc trên mạng Internet. Trong phiên bản hiện tại (IPv4), con số được mã hoá với 32 bit, và thường được thể hiện là 4 con số phân cách nhau bởi dấu chấm (ví dụ <code class="literal">192.168.0.1</code>), mỗi con số khoảng từ 0 đển 255 (tương ứng 8 bit). Phiên bản tiếp theo của giao thức này là IPv6, nó cho phép mở rộng không gian địa chỉ tới 128 bit, và địa chỉ được thể hiện bằng một chuỗi các chữ số thập lục phân được cách nhau bởi dấu hai chấm (ví dụ: 2001:0db8:13bb:0002:0000:0000:0000:0020, hoặc viết tắt là 2001:db8:13bb:2::20
		</div><a id="id-1.11.6.2.13" class="indexterm"></a><a id="id-1.11.6.2.14" class="indexterm"></a><a id="id-1.11.6.2.15" class="indexterm"></a><div class="para">
			Một mặt nạ mạng (netmask) định nghĩa trong mã nhị phân của nó một phần của địa chỉ IP tương ứng với mạng, phần còn lại chỉ định cho máy. Trong ví dụ về cấu hình địa chỉ IPv4 tĩnh ở đây, mặt nạ mạng thể hiện là <code class="literal">255.255.255.0</code> (có 24 các bit “1” và theo sau là 8 bit “0” trong biểu diễn nhị phân) cho biết rằng 24 bit của địa chỉ IP tương ứng với địa chỉ mạng, và 8 bit khác dành riêng cho máy. Trong IPv6, để cho dễ đọc, chỉ cần thể hiện bao nhiêu bit “1”; ví dụ một mặt nạ mạng cho mạng IPv6 chỉ cần viết <code class="literal">64</code>.
		</div><div class="para">
			Địa chỉ mạng là địa chỉ IP trong đó phần mô tả số máy là 0. Phạm vi địa chỉ IPv4 trong một mạng hoàn chỉnh thường được chỉ ra bởi cú pháp, <span class="emphasis"><em>a.b.c.d/e</em></span>, trong đó <span class="emphasis"><em>a.b.c.d</em></span> là địa chỉ mạng và <span class="emphasis"><em>e</em></span> là số bit thể hiện phần mạng trong một địa chỉ IP. Đối với ví dụ trên sẽ được viết: <code class="literal">192.168.0.0/24</code>. Cú pháp này tương tự trong IPv6: <code class="literal">2001:db8:13bb:2::/64</code>.
		</div><a id="id-1.11.6.2.18" class="indexterm"></a><a id="id-1.11.6.2.19" class="indexterm"></a><div class="para">
			Bộ định tuyến (router), là một máy giúp kết nối nhiều mạng lại với nhau. Tất cả lưu lượng truy cập đến thông qua một router được chỉ dẫn đến đúng mạng. Để làm điều này, router phân tích các gói tin đến và chuyển hướng chúng theo địa chỉ IP của đích. Router thường được biết đến như là một gateway (cổng kết nối); trong cấu hình này, nó hoạt động như một máy giúp vượt ra ngoài một mạng cục bộ (hướng tới một mạng mở rộng hơn, chẳng hạn như Internet).
		</div><a id="id-1.11.6.2.21" class="indexterm"></a><div class="para">
			Địa chỉ quảng bá (broadcast address) là địa chỉ đặc biệt nhằm kết nối tất cả các trạm trong mạng. Hầu như không bao giờ “được định tuyến”, nó chỉ là một phuơng thức trong mạng để đặt câu hỏi. Cụ thể hơn, một gói dữ liệu quảng bá không bao giờ đi qua router.
		</div><div class="para">
			Chương này tập trung vào địa chỉ IPv4, vì chúng hiện đang được sử dụng phổ biến nhất. Các chi tiết của giao thức IPv6 được tiếp cận trong <a class="xref" href="sect.ipv6.html">Phần 10.5, “IPv6”</a>, nhưng các khái niệm vẫn giữ nguyên.
		</div></div><div class="para">
			Vì mạng được cấu hình tự động trong quá trình cài đặt ban đầu, tệp <code class="filename">/etc/network/interfaces</code> đã chứa một cấu hình hợp lệ. Một dòng bắt đầu bằng <code class="literal">auto</code> đưa ra một danh sách các giao diện được tự động cấu hình khi khởi động bằng <span class="pkg pkg">ifupdown</span> hoặc từ <code class="filename">/etc/init.d/networking</code>. Card này thường là <code class="literal">eth0</code>, tức card Ethernet đầu tiên.
		</div><a id="id-1.11.6.4" class="indexterm"></a><a id="id-1.11.6.5" class="indexterm"></a><a id="id-1.11.6.6" class="indexterm"></a><a id="id-1.11.6.7" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>ALTERNATIVE</em></span> NetworkManager</strong></p></div></div></div><a id="id-1.11.6.8.2" class="indexterm"></a><div class="para">
			Nếu Network Manager được đặc biệt khuyến khích trong các thiết lập roaming (xem <a class="xref" href="sect.network-config.html#sect.roaming-network-config">Phần 8.2.4, “Automatic Network Configuration for Roaming Users”</a>), nó cũng hoàn toàn có thể sử dụng làm công cụ quản lý mạng mặc định. Bạn có thể tạo “System connections” (các kết nối hệ thống) để sử dụng ngay khi máy tính khởi động, bằng cách cấu hình trực tiếp với tệp tin <code class="filename">.ini</code> - giống như tệp <code class="filename">/etc/NetworkManager/system-connections/</code> hoặc thông qua công cụ đồ họa (<code class="command">nm-connection-editor</code>). Hãy nhớ hủy bỏ tất cả các mục đã cài đặt trong <code class="filename">/etc/network/interfaces</code> nếu bạn muốn Network Manager xử lý chúng. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="https://wiki.gnome.org/Projects/NetworkManager/SystemSettings/jessie">https://wiki.gnome.org/Projects/NetworkManager/SystemSettings/jessie</a></div> <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="https://developer.gnome.org/NetworkManager/0.9/ref-settings.html">https://developer.gnome.org/NetworkManager/0.9/ref-settings.html</a></div>
		</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.interface-ethernet"></a>8.2.1. Giao diện Ethernet</h3></div></div></div><div class="para">
				Nếu máy tính có card Ethernet, mạng IP được liên kết với nó phải được cấu hình bằng cách chọn từ một trong hai phương pháp. Phương pháp đơn giản nhất là cấu hình tự động với DHCP, và nó yêu cầu một máy chủ DHCP trên mạng nội bộ. Nó có thể cho biết một tên máy chủ mong muốn, tương ứng với cài đặt <code class="literal">hostname</code> trong ví dụ dưới đây. Máy chủ DHCP sẽ gửi các cài đặt cấu hình cho mạng thích hợp.
			</div><a id="id-1.11.6.9.3" class="indexterm"></a><a id="id-1.11.6.9.4" class="indexterm"></a><div class="example"><a xmlns="" id="example.config-dhcp"></a><p class="title"><strong>Ví dụ 8.1. Cấu hình DHCP</strong></p><div class="example-contents"><pre class="programlisting">
auto eth0
iface eth0 inet dhcp
  hostname arrakis</pre></div></div><div class="para">
				Cấu hình “tĩnh” phải cho biết cài đặt mạng theo cách cố định. Bao gồm ít nhất địa chỉ IP và mặt nạ mạng; địa chỉ mạng và quảng bá cũng đôi khi được liệt kê. Một bộ định tuyến kết nối với mạng sẽ được chỉ định như là một gateway.
			</div><div class="example"><a xmlns="" id="example.static-network"></a><p class="title"><strong>Ví dụ 8.2. Cấu hình tĩnh</strong></p><div class="example-contents"><pre class="programlisting">
auto eth0
iface eth0 inet static
  address 192.168.0.3
  netmask 255.255.255.0
  broadcast 192.168.0.255
  network 192.168.0.0
  gateway 192.168.0.1</pre></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>GHI CHÚ</em></span> Nhiều địa chỉ (Multiple addresses)</strong></p></div></div></div><div class="para">
				Không chỉ có thể liên kết nhiều giao diện với một card mạng vật lý mà còn có thể gắn một số địa chỉ IP cho một giao diện duy nhất. Nhớ rằng địa chỉ IP có thể tương ứng với bất kỳ tên nào thông qua DNS và tên cũng có thể tương ứng với bất kỳ địa chỉ IP nào.
			</div><div class="para">
				Như bạn có thể đoán, cấu hình có thể khá phức tạp, nhưng các tùy chọn này chỉ được sử dụng trong những trường hợp rất đặc biệt. Các ví dụ trích dẫn ở đây là điển hình của các cấu hình thông thường.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.ppp-rtc"></a>8.2.2. Connecting with PPP through a PSTN Modem</h3></div></div></div><a id="id-1.11.6.10.2" class="indexterm"></a><a id="id-1.11.6.10.3" class="indexterm"></a><a id="id-1.11.6.10.4" class="indexterm"></a><a id="id-1.11.6.10.5" class="indexterm"></a><div class="para">
				A point to point (PPP) connection establishes an intermittent connection; this is the most common solution for connections made with a telephone modem (“PSTN modem”, since the connection goes over the public switched telephone network).
			</div><div class="para">
				A connection by telephone modem requires an account with an access provider, including a telephone number, username, password, and, sometimes the authentication protocol to be used. Such a connection is configured using the <code class="command">pppconfig</code> tool in the Debian package of the same name. By default, it sets up a connection named <code class="literal">provider</code> (as in Internet service provider). When in doubt about the authentication protocol, choose <span class="emphasis"><em>PAP</em></span>: it is offered by the majority of Internet service providers.
			</div><a id="id-1.11.6.10.8" class="indexterm"></a><a id="id-1.11.6.10.9" class="indexterm"></a><div class="para">
				After configuration, it is possible to connect using the <code class="command">pon</code> command (giving it the name of the connection as a parameter, when the default value of <code class="literal">provider</code> is not appropriate). The link is disconnected with the <code class="command">poff</code> command. These two commands can be executed by the root user, or by any other user, provided they are in the <code class="literal">dip</code> group.
			</div><a id="id-1.11.6.10.11" class="indexterm"></a><a id="id-1.11.6.10.12" class="indexterm"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.adsl"></a>8.2.3. Connecting through an ADSL Modem</h3></div></div></div><a id="id-1.11.6.11.2" class="indexterm"></a><a id="id-1.11.6.11.3" class="indexterm"></a><a id="id-1.11.6.11.4" class="indexterm"></a><div class="para">
				The generic term “ADSL modem” covers a multitude of devices with very different functions. The modems that are simplest to use with Linux are those that have an Ethernet interface (and not only a USB interface). These tend to be popular; most ADSL Internet service providers lend (or lease) a “box” with Ethernet interfaces. Depending on the type of modem, the configuration required can vary widely.
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.adsl-pppoe"></a>8.2.3.1. Modems Supporting PPPOE</h4></div></div></div><a id="id-1.11.6.11.6.2" class="indexterm"></a><a id="id-1.11.6.11.6.3" class="indexterm"></a><div class="para">
					Some Ethernet modems work with the PPPOE protocol (Point to Point Protocol over Ethernet). The <code class="command">pppoeconf</code> tool (from the package with the same name) will configure the connection. To do so, it modifies the <code class="filename">/etc/ppp/peers/dsl-provider</code> file with the settings provided and records the login information in the <code class="filename">/etc/ppp/pap-secrets</code> and <code class="filename">/etc/ppp/chap-secrets</code> files. It is recommended to accept all modifications that it proposes.
				</div><div class="para">
					Once this configuration is complete, you can open the ADSL connection with the command, <code class="command">pon dsl-provider</code> and disconnect with <code class="command">poff dsl-provider</code>.
				</div><a id="id-1.11.6.11.6.6" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>TIP</em></span> Starting <code class="command">ppp</code> at boot</strong></p></div></div></div><a id="id-1.11.6.11.6.7.2" class="indexterm"></a><a id="id-1.11.6.11.6.7.3" class="indexterm"></a><div class="para">
					PPP connections over ADSL are, by definition, intermittent. Since they are usually not billed according to time, there are few downsides to the temptation of keeping them always open. The standard means to do so is to use the init system.
				</div><div class="para">
					The default init system on <span class="distribution distribution">Jessie</span> is <code class="command">systemd</code>. Adding an automatically restarting task for the ADSL connection is a simple matter of creating a “unit file” such as <code class="filename">/etc/systemd/system/adsl-connection.service</code>, with contents such as the following:
				</div><pre class="programlisting">[Unit]
Description=ADSL connection

[Service]
Type=forking
ExecStart=/usr/sbin/pppd call dsl-provider
Restart=always

[Install]
WantedBy=multi-user.target</pre><div class="para">
					Once this unit file has been defined, it needs to be enabled with <code class="command">systemctl enable adsl-connection</code>. Then the loop can be started manually with <code class="command">systemctl start adsl-connection</code>; it will also be started automatically on boot.
				</div><div class="para">
					On systems not using <code class="command">systemd</code> (including <span class="distribution distribution">Wheezy</span> and earlier versions of Debian), the standard SystemV init works differently. On such systems, all that is needed is to add a line such as the following at the end of the <code class="filename">/etc/inittab</code> file; then, any time the connection is disconnected, <code class="command">init</code> will reconnect it.
				</div><pre class="programlisting">
adsl:2345:respawn:/usr/sbin/pppd call dsl-provider
</pre><div class="para">
					For ADSL connections that auto-disconnect on a daily basis, this method reduces the duration of the interruption.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.adsl-pptp"></a>8.2.3.2. Modems Supporting PPTP</h4></div></div></div><a id="id-1.11.6.11.7.2" class="indexterm"></a><div class="para">
					The PPTP (Point-to-Point Tunneling Protocol) protocol was created by Microsoft. Deployed at the beginning of ADSL, it was quickly replaced by PPPOE. If this protocol is forced on you, see <a class="xref" href="sect.virtual-private-network.html#sect.pptp">Phần 10.2.4, “PPTP”</a>.
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.adsl-dhcp"></a>8.2.3.3. Modems Supporting DHCP</h4></div></div></div><div class="para">
					When a modem is connected to the computer by an Ethernet cable (crossover cable) you typically configure a network connection by DHCP on the computer; the modem automatically acts as a gateway by default and takes care of routing (meaning that it manages the network traffic between the computer and the Internet).
				</div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>BACK TO BASICS</em></span> Crossover cable for a direct Ethernet connection</strong></p></div></div></div><a id="id-1.11.6.11.8.3.2" class="indexterm"></a><div class="para">
					Computer network cards expect to receive data on specific wires in the cable, and send their data on others. When you connect a computer to a local network, you usually connect a cable (straight or crossover) between the network card and a repeater or switch. However, if you want to connect two computers directly (without an intermediary switch or repeater), you must route the signal sent by one card to the receiving side of the other card, and vice-versa. This is the purpose of a crossover cable, and the reason it is used.
				</div><div class="para">
					Note that this distinction has become almost irrelevant over time, as modern network cards are able do detect the type of cable present and adapt accordingly, so it won't be unusual that both kinds of cable will work in a given location.
				</div></div><div class="para">
					Most “ADSL routers” on the market can be used like this, as do most of the ADSL modems provided by Internet services providers.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.roaming-network-config"></a>8.2.4. Automatic Network Configuration for Roaming Users</h3></div></div></div><a id="id-1.11.6.12.2" class="indexterm"></a><a id="id-1.11.6.12.3" class="indexterm"></a><div class="para">
				Many Falcot engineers have a laptop computer that, for professional purposes, they also use at home. The network configuration to use differs according to location. At home, it may be a wifi network (protected by a WPA key), while the workplace uses a wired network for greater security and more bandwidth.
			</div><div class="para">
				To avoid having to manually connect or disconnect the corresponding network interfaces, administrators installed the <span class="pkg pkg">network-manager</span> package on these roaming machines. This software enables a user to easily switch from one network to another using a small icon displayed in the notification area of their graphical desktop. Clicking on this icon displays a list of available networks (both wired and wireless), so they can simply choose the network they wish to use. The program saves the configuration for the networks to which the user has already connected, and automatically switches to the best available network when the current connection drops.
			</div><div class="para">
				In order to do this, the program is structured in two parts: a daemon running as root handles activation and configuration of network interfaces and a user interface controls this daemon. PolicyKit handles the required authorizations to control this program and Debian configured PolicyKit in such a way so that members of the netdev group can add or change Network Manager connections.
			</div><div class="para">
				Network Manager knows how to handle various types of connections (DHCP, manual configuration, local network), but only if the configuration is set with the program itself. This is why it will systematically ignore all network interfaces in <code class="filename">/etc/network/interfaces</code> for which it is not suited. Since Network Manager doesn't give details when no network connections are shown, the easy way is to delete from <code class="filename">/etc/network/interfaces</code> any configuration for all interfaces that must be managed by Network Manager.
			</div><div class="para">
				Note that this program is installed by default when the “Desktop Environment” task is chosen during initial installation.
			</div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>ALTERNATIVE</em></span> Configuration by “network profile”</strong></p></div></div></div><a id="id-1.11.6.12.9.2" class="indexterm"></a><div class="para">
				More advanced users may want to try the <span class="pkg pkg">guessnet</span> package for automatic network configuration. A group of test scripts determine which network profile should be activated and configure it on the fly.
			</div><div class="para">
				Users who prefer to manually select a network profile will prefer the <span class="pkg pkg">netenv</span> program, found in the package of the same name.
			</div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="basic-configuration.html"><strong>Trước đó</strong>Chương 8. Cấu hình cơ bản: Mạng, Tài khoản, In ấn...</a></li><li class="up"><a accesskey="u" href="#"><strong>Lên</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Đầu</strong></a></li><li class="next"><a accesskey="n" href="sect.hostname-name-service.html"><strong>Kế tiếp</strong>8.3. Setting the Hostname and Configuring the Nam...</a></li></ul></body></html>