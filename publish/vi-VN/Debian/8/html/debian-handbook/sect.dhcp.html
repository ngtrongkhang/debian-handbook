<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>10.7. DHCP</title><meta name="generator" content="publican v4.3.2"/><meta name="keywords" content="Network, Gateway, TCP/IP, IPv6, DNS, Bind, DHCP, QoS"/><link rel="prev" href="sect.domain-name-servers.html" title="10.6. Domain Name Servers (DNS)"/><link rel="next" href="sect.network-diagnosis-tools.html" title="10.8. Network Diagnosis Tools"/><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.dhcp.html"/></head><body onLoad="initSwitchery(); jQuery(&quot;#poptoc&quot;).load('index.html .toc:eq(0)'); jQuery('.programlisting').each(function(i, block){hljs.highlightBlock(block);});" onClick="hide('poptoc');"><header><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.domain-name-servers.html"><strong>Trước đó</strong></a></li><li class="home" onClick="work=1;showhide('poptoc');">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.network-diagnosis-tools.html"><strong>Kế tiếp</strong></a></li></ul></header><div id="poptoc" class="hidden"> </div><section class="section" id="sect.dhcp"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.dhcp"/>10.7. DHCP</h2></div></div></div>
		
		 <p>
			DHCP (for <span class="emphasis"><em>Dynamic Host Configuration Protocol</em></span>) is a protocol by which a machine can automatically get its network configuration when it boots. This allows centralizing the management of network configurations, and ensuring that all desktop machines get similar settings.
		</p>
		 <a id="id-1.13.10.3" class="indexterm"></a>
		 <a id="id-1.13.10.4" class="indexterm"></a>
		 <a id="id-1.13.10.5" class="indexterm"></a>
		 <p>
			A DHCP server provides many network-related parameters. The most common of these is an IP address and the network where the machine belongs, but it can also provide other information, such as DNS servers, WINS servers, NTP servers, and so on.
		</p>
		 <p>
			The Internet Software Consortium (also involved in developing <span class="command"><strong>bind</strong></span>) is the main author of the DHCP server. The matching Debian package is <span class="pkg pkg">isc-dhcp-server</span>.
		</p>
		 <section class="section" id="sect.dhcp-config"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.dhcp-config"/>10.7.1. Configuring</h3></div></div></div>
			
			 <p>
				The first elements that need to be edited in the DHCP server configuration file (<code class="filename">/etc/dhcp/dhcpd.conf</code>) are the domain name and the DNS servers. If this server is alone on the local network (as defined by the broadcast propagation), the <code class="literal">authoritative</code> directive must also be enabled (or uncommented). One also needs to create a <code class="literal">subnet</code> section describing the local network and the configuration information to be provided. The following example fits a <code class="literal">192.168.0.0/24</code> local network with a router at <code class="literal">192.168.0.1</code> serving as the gateway. Available IP addresses are in the range <code class="literal">192.168.0.128</code> to <code class="literal">192.168.0.254</code>.
			</p>
			 <div class="example" id="example.dhcp-dhcpd.conf"><a xmlns="" id="example.dhcp-dhcpd.conf"/><p class="title"><strong>Ví dụ 10.15. Excerpt of <code class="filename">/etc/dhcp/dhcpd.conf</code></strong></p><div class="example-contents">
				
				 
<pre class="programlisting">
#
# Sample configuration file for ISC dhcpd for Debian
#

# The ddns-updates-style parameter controls whether or not the server will
# attempt to do a DNS update when a lease is confirmed. We default to the
# behavior of the version 2 packages ('none', since DHCP v2 didn't
# have support for DDNS.)
ddns-update-style interim;

# option definitions common to all supported networks...
option domain-name "internal.falcot.com";
option domain-name-servers ns.internal.falcot.com;

default-lease-time 600;
max-lease-time 7200;

# If this DHCP server is the official DHCP server for the local
# network, the authoritative directive should be uncommented.
authoritative;

# Use this to send dhcp log messages to a different log file (you also
# have to hack syslog.conf to complete the redirection).
log-facility local7;

# My subnet
subnet 192.168.0.0 netmask 255.255.255.0 {
    option routers 192.168.0.1;
    option broadcast-address 192.168.0.255;
    range 192.168.0.128 192.168.0.254;
    ddns-domainname "internal.falcot.com";
}
</pre>

			</div></div>

		</section>
		 <section class="section" id="sect.dhcp-dns"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.dhcp-dns"/>10.7.2. DHCP and DNS</h3></div></div></div>
			
			 <a id="id-1.13.10.9.2" class="indexterm"></a>
			 <p>
				A nice feature is the automated registering of DHCP clients in the DNS zone, so that each machine gets a significant name (rather than something impersonal such as <code class="literal">machine-192-168-0-131.internal.falcot.com</code>). Using this feature requires configuring the DNS server to accept updates to the <code class="literal">internal.falcot.com</code> DNS zone from the DHCP server, and configuring the latter to submit updates for each registration.
			</p>
			 <p>
				In the <span class="command"><strong>bind</strong></span> case, the <code class="literal">allow-update</code> directive needs to be added to each of the zones that the DHCP server is to edit (the one for the <code class="literal">internal.falcot.com</code> domain, and the reverse zone). This directive lists the IP addresses allowed to perform these updates; it should therefore contain the possible addresses of the DHCP server (both the local address and the public address, if appropriate).
			</p>
			 
<pre class="programlisting">
allow-update { 127.0.0.1 192.168.0.1 212.94.201.10 !any };
</pre>
			 <p>
				Beware! A zone that can be modified <span class="emphasis"><em>will</em></span> be changed by <span class="command"><strong>bind</strong></span>, and the latter will overwrite its configuration files at regular intervals. Since this automated procedure produces files that are less human-readable than manually-written ones, the Falcot administrators handle the <code class="literal">internal.falcot.com</code> domain with a delegated DNS server; this means the <code class="literal">falcot.com</code> zone file stays firmly under their manual control.
			</p>
			 <p>
				The DHCP server configuration excerpt above already includes the directives required for DNS zone updates: they are the <code class="literal">ddns-update-style interim;</code> and <code class="literal">ddns-domain-name "internal.falcot.com";</code> lines in the block describing the subnet.
			</p>

		</section>

	</section><footer/></body></html>