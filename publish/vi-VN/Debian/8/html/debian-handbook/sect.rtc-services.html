<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">11.8. Các dịch vụ Liên lạc Thời gian thực</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Debian-debian-handbook-8-vi-VN-1.0-1" /><meta name="keywords" content="Postfix, Apache, NFS, Samba, Squid, OpenLDAP, SIP" /><link rel="home" href="index.html" title="Sổ tay Quản trị Debian" /><link rel="up" href="network-services.html" title="Chương 11. Những dịch vụ mạng: Postfix, Apache, NFS, Samba, Squid, LDAP, SIP, XMPP, TURN" /><link rel="prev" href="sect.ldap-directory.html" title="11.7. Danh bạ LDAP" /><link rel="next" href="advanced-administration.html" title="Chương 12. Advanced Administration" /><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.rtc-services.html" /></head><body><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><p id="title"><a class="left" href="http://www.debian.org"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="index.html"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.ldap-directory.html"><strong>Trước đó</strong></a></li><li class="home">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="advanced-administration.html"><strong>Kế tiếp</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.rtc-services"></a>11.8. Các dịch vụ Liên lạc Thời gian thực</h2></div></div></div><div class="para">
			Các dịch vụ liên lạc Thời gian thực (Real-Time Communication - RTC) bao gồm dịch vụ thoại, truyền hình/webcam, nhắn tin trực tuyến (instant messaging - IM) và chia sẻ màn hình. Chương này giới thiệu ngắn gọn về ba trong số những dịch vụ buộc phải có để chạy RTC, bao gồm một máy phục vụ TURN, máy phục vụ SIP và máy phục vụ XMPP. Chi tiết đầy đủ về làm sao để lên kế hoạch, cài đặt và quản lý các dịch vụ này có sẵn trong Hướng dẫn Bắt đầu Nhanh với Liên lạc Thời gian thực vốn bao gồm các ví dụ cụ thể với Debian. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://rtcquickstart.org">http://rtcquickstart.org</a></div>
		</div><a id="id-1.14.11.3" class="indexterm"></a><a id="id-1.14.11.4" class="indexterm"></a><a id="id-1.14.11.5" class="indexterm"></a><a id="id-1.14.11.6" class="indexterm"></a><div class="para">
			Cả hai SIP và XMPP đều có thể cung cấp các tính năng tương đương. SIP thì được biết đến nhiều hơn một chút cho các dịch vụ thoại và truyền hình trong khi XMPP được xem như một giao thức nhắn tin tức thời. Thực ra, cả hai đều có thể sử dụng cho bất kỳ mục đích nào. Để tối đa hóa các lựa chọn kết nối, chạy cả hai song song được khuyến cáo.
		</div><a id="id-1.14.11.8" class="indexterm"></a><a id="id-1.14.11.9" class="indexterm"></a><div class="para">
			Các dịch vụ này dựa trên các chứng chỉ X.509 cho mục đích xác thực và bảo mật. Xem <a class="xref" href="sect.virtual-private-network.html#sect.easy-rsa">Phần 10.2.1.1, “Public Key Infrastructure: <span class="emphasis"><em>easy-rsa</em></span>”</a> để biết thêm chi tiết về cách để tạo ra chúng. Ngoài ra <span class="emphasis"><em>Hướng dẫn Bắt đầu Nhanh với Liên lạc Thời gian thực</em></span> cũng có một vài cách giải thích hữu dụng: <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://rtcquickstart.org/guide/multi/tls.html">http://rtcquickstart.org/guide/multi/tls.html</a></div>
		</div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.rtc-dns-settings"></a>11.8.1. Các cài đặt DNS cho các dịch vụ RTC</h3></div></div></div><div class="para">
				Các dịch vụ RTC buộc yêu cầu phải có các mẩu tin(records) DNS SRV và NAPTR. Một ví dụ về cấu hình như sau có thể được đặt vào tập tin zone cho <code class="literal">falcot.com</code>:
			</div><a id="id-1.14.11.11.3" class="indexterm"></a><a id="id-1.14.11.11.4" class="indexterm"></a><pre class="programlisting">
; máy phục vụ nơi mà mọi thứ sẽ chạy
server1            IN     A      198.51.100.19
server1            IN     AAAA   2001:DB8:1000:2000::19

; hiện thời chỉ có IPv4 cho TURN, một số chương trình khách có nhiều lỗi với IPv6
turn-server        IN     A      198.51.100.19

; Các địa chỉ IPv4 và IPv6 cho SIP
sip-proxy          IN     A      198.51.100.19
sip-proxy          IN     AAAA   2001:DB8:1000:2000::19

; Các địa chỉ IPv4 và IPv6 cho XMPP
xmpp-gw            IN     A      198.51.100.19
xmpp-gw            IN     AAAA   2001:DB8:1000:2000::19

; DNS SRV và NAPTR cho STUN / TURN
_stun._udp  IN SRV    0 1 3467 turn-server.falcot.com.
_turn._udp  IN SRV    0 1 3467 turn-server.falcot.com.
@           IN NAPTR  10 0 "s" "RELAY:turn.udp" "" _turn._udp.falcot.com.

; Các mẩu tin DNS SRV và NAPTR cho SIP
_sips._tcp  IN SRV    0 1 5061 sip-proxy.falcot.com.
@           IN NAPTR  10 0 "s" "SIPS+D2T" "" _sips._tcp.falcot.com.

; Các mẩu tin DNS SRV cho chế độ máy phục vụ và chế độ chương trình khách XMPP:
_xmpp-client._tcp  IN     SRV    5 0 5222 xmpp-gw.falcot.com.
_xmpp-server._tcp  IN     SRV    5 0 5269 xmpp-gw.falcot.com.</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.turn-server"></a>11.8.2. Máy phục vụ TURN</h3></div></div></div><div class="para">
				TURN là một dịch vụ giúp các chương trình khách phía sau các router NAT và tường lửa tìm được cách hiệu quả nhất để giao tiếp với các chương trình khách khác và để chuyển phát các luồng thông tin nếu không có đường đi trực tiếp cho các thông tin đó. Máy phục vụ TURN được khuyến cáo cài đặt trước khi bất kỳ một trong các dịch vụ RTC khác được cung cấp cho các người dùng cuối.
			</div><a id="id-1.14.11.12.3" class="indexterm"></a><div class="para">
				TURN và giao thức ICE liên quan là các tiêu chuẩn mở. Để có lợi được từ những giao thức này, nghĩa là tối đa hóa đường kết nối và giảm thiểu sự phiền phức cho người sử dụng, việc đảm bảo rằng các chương trình khách hỗ trợ ICE và TURN là rất quan trọng.
			</div><a id="id-1.14.11.12.5" class="indexterm"></a><div class="para">
				Để thuật toán ICE hoạt động hiệu quả, máy phục vụ phải có hai địa chỉ công cộng IPv4.
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.turn-server-install"></a>11.8.2.1. Cài đặt máy phục vụ TURN</h4></div></div></div><div class="para">
					Cài đặt gói phần mềm <span class="pkg pkg">resiprocate-turn-server</span>.
				</div><div class="para">
					Chỉnh sửa tập tin cấu hình <code class="filename">/etc/reTurn/reTurnServer.config</code>. Điều quan trọng nhất là chèn vào đó các địa chỉ IP của máy phục vụ.
				</div><pre class="programlisting">
# các địa chỉ IP của bạn đặt vào đây:
TurnAddress = 198.51.100.19
TurnV6Address = 2001:DB8:1000:2000::19
AltStunAddress = 198.51.100.20
# miền máy tính của bạn đặt vào đây, nó phải khớp với giá trị được sử dụng
# để mã hóa các mật mã của bạn nếu chúng đã được mã hóa
# bằng thuật toán HA1:
AuthenticationRealm = myrealm

UserDatabaseFile = /etc/reTurn/users.txt
UserDatabaseHashedPasswords = true</pre><div class="para">
					Khởi động lại dịch vụ này
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.turn-server-management"></a>11.8.2.2. Quản lý các người sử dụng TURN</h4></div></div></div><div class="para">
					Sử dụng công cụ htdigest để quản lý danh sách người sử dụng của máy phục vụ TURN
				</div><pre class="screen"><code class="computeroutput"># </code><strong class="userinput"><code>htdigest /etc/reTurn/users.txt myrealm joe</code></strong></pre><div class="para">
					Sử dụng tín hiệu HUP để buộc máy phục vụ tự cập nhật tập tin <code class="filename">/etc/reTurn/users.txt</code> sau khi chỉnh sửa nó hoặc kích hoạt tính năng tự động cập nhật trong <code class="filename">/etc/reTurn/reTurnServer.config</code>.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.sip-server"></a>11.8.3. Máy phục vụ Trạm Chuyển hướng SIP</h3></div></div></div><div class="para">
				Máy phục vụ trạm chuyển hướng SIP quản lý các kết nối SIP đến và đi giữa các tổ chức, các nhà cung cấp dịch vụ thoại và truyền tải đa phương tiện trên SIP, các chi nhánh giao dịch tư nhân SIP (SIP PBX) như là Asterisk, các điện thoại chạy trên SIP, các chương trình gọi điện thoại dựa trên SIP và các chương trình WebRTC.
			</div><a id="id-1.14.11.13.3" class="indexterm"></a><a id="id-1.14.11.13.4" class="indexterm"></a><a id="id-1.14.11.13.5" class="indexterm"></a><a id="id-1.14.11.13.6" class="indexterm"></a><div class="para">
				Việc cài đặt và cấu hình trạm chuyển phát SIP trước khi tiến hành thử cài đặt một SIP PBX rất được khuyến cáo. Trạm chuyển phát SIP rải đều lượng tải thông tin đến PBX và cung cấp đường truyền tốt hơn và khả năng phục hồi tốt hơn.
			</div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.sip-server-install"></a>11.8.3.1. Cài đặt một trạm chuyển phát SIP</h4></div></div></div><div class="para">
					Cài đặt gói phần mềm <span class="pkg pkg">repro</span>. Sử dụng gói phần mềm <span class="distribution distribution">jessie-backports</span> rất được khuyến cáo, bởi nó có những tiến bộ mới nhất để tối đa hóa khả năng kết nối và khả năng phục hồi khi gặp sự cố.
				</div><a id="id-1.14.11.13.8.3" class="indexterm"></a><div class="para">
					Chỉnh sửa tập tin cấu hình <code class="filename">/etc/repro/repro.config</code>. Điều quan trọng nhất để làm là chèn vào đó những địa chỉ IP của máy phục vụ. Ví dụ dưới đây trình bày cách để cài đặt một SIP bình thường và các Websocket/WebRTC, sử dụng TLS, IPv4 và IPv6.
				</div><pre class="programlisting">
# Transport1 sẽ được dành cho SIP trên các kết nối TLS
# Chúng ta sử dụng cổng 5061 ở đây nhưng nếu bạn có các chương trình khách kết nối từ
# các địa điểm có kèm tường lửa bạn có thể thay đổi điều này để lắng nghe trên cổng 443
Transport1Interface = 198.51.100.19:5061
Transport1Type = TLS
Transport1TlsDomain = falcot.com
Transport1TlsClientVerification = Optional
Transport1RecordRouteUri = sip:falcot.com;transport=TLS
Transport1TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport1TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport2 là phiên bản IPv6 của Transport1
Transport2Interface = 2001:DB8:1000:2000::19:5061
Transport2Type = TLS
Transport2TlsDomain = falcot.com
Transport2TlsClientVerification = Optional
Transport2RecordRouteUri = sip:falcot.com;transport=TLS
Transport2TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport2TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport3 sẽ được dành cho SIP trên các kết nối WebSocket (WebRTC)
# Chúng ta sử dụng cổng 8443 ở đây nhưng bạn có thể sử dụng cổng 443
Transport3Interface = 198.51.100.19:8443
Transport3Type = WSS
Transport3TlsDomain = falcot.com
# Điều này sẽ buộc phải có một trình duyệt để gửi một chứng chỉ, nhưng các trình duyệt
# hiện tại có vẻ không thể làm được điều đó, nên hãy đặt giá trị là None:
Transport3TlsClientVerification = None
Transport3RecordRouteUri = sip:falcot.com;transport=WSS
Transport3TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport3TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport 4 là phiên bản IPv6 của Transport3
Transport4Interface = 2001:DB8:1000:2000::19:8443
Transport4Type = WSS
Transport4TlsDomain = falcot.com
Transport4TlsClientVerification = None
Transport4RecordRouteUri = sip:falcot.com;transport=WSS
Transport4TlsPrivateKey = /etc/ssl/private/falcot.com-key.pem
Transport4TlsCertificate = /etc/ssl/public/falcot.com.pem

# Transport5: cái này có thể dành cho các kết nối TCP đến một máy phục vụ Asterisk
# trong mạng nội bộ của bạn.  Không cho phép cổng 5060 qua tường lửa
# bên ngoài.
Transport5Interface = 198.51.100.19:5060
Transport5Type = TCP
Transport5RecordRouteUri = sip:198.51.100.19:5060;transport=TCP

HttpBindAddress = 198.51.100.19, 2001:DB8:1000:2000::19
HttpAdminUserFile = /etc/repro/users.txt

RecordRouteUri = sip:falcot.com;transport=tls
ForceRecordRouting = true
EnumSuffixes = e164.arpa, sip5060.net, e164.org
DisableOutbound = false
EnableFlowTokens = true
EnableCertificateAuthenticator = True</pre><div class="para">
					Sử dụng tiện ích <code class="command">htdigest</code> để quản lý mật mã quản trị cho giao diện web. Tên người dùng phải là <span class="emphasis"><em>admin</em></span> và tên realm phải khớp với giá trị được chỉ ra trong <code class="filename">repro.config</code>.
				</div><pre class="screen"><code class="computeroutput"># </code><strong class="userinput"><code>htdigest /etc/repro/users.txt repro admin</code></strong></pre><div class="para">
					Khởi động lại dịch vụ để sử dụng cấu hình mới.
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.sip-server-management"></a>11.8.3.2. Quản lý trạm chuyển phát SIP</h4></div></div></div><div class="para">
					Chuyển đến giao diện web tại <code class="literal">http://sip-proxy.falcot.com:5080</code> để hoàn tất cấu hình bằng việc thêm các miền máy tính, các người dùng nội bộ và các định tuyến tĩnh(static routes).
				</div><div class="para">
					Bước đầu tiên là th��m một miền máy tính nội bộ. Tiến trình phải được khởi động lại sau khi thêm hoặc bỏ đi những miền máy tính khỏi danh sách này.
				</div><div class="para">
					Trạm chuyển phát biết cách để định tuyến các cuộc gọi giữa các người sử dụng nội bộ và địa chỉ SIP đầy đủ, cấu hình định tuyến này chỉ thực sự cần thiết để từ chối (override) hành vi ngầm định, ví dụ, để nhận dạng các số điện thoại và thêm một tiền tố và định tuyến nó đến một nhà cung cấp SIP.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.xmpp-server"></a>11.8.4. Máy phục vụ XMPP</h3></div></div></div><div class="para">
				Một máy phục vụ XMPP quản lý kết nối giữa các người sử dụng XMPP nội bộ và những người sử dụng XMPP ở những miền máy tính khác trên mạng Internet công cộng.
			</div><a id="id-1.14.11.14.3" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>TỪ VỰNG</em></span> XMPP hay Jabber?</strong></p></div></div></div><a id="id-1.14.11.14.4.2" class="indexterm"></a><div class="para">
				XMPP thỉnh thoảng được biết tới như là Jabber. Thực ra, Jabber là một thương hiệu và XMPP là tên chính thức của một tiêu chuẩn.
			</div><a id="id-1.14.11.14.4.4" class="indexterm"></a></div><div class="para">
				Prosody là một máy phục vụ XMPP vốn hoạt động ổn định trên các máy phục vụ Debian.
			</div><a id="id-1.14.11.14.6" class="indexterm"></a><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.xmpp-server-install"></a>11.8.4.1. Cài đặt máy phục vụ XMPP</h4></div></div></div><div class="para">
					Cài đặt gói phần mềm <span class="pkg pkg">prosody</span>. Sử dụng gói phần mềm này từ <span class="distribution distribution">jessie-backports</span> là rất được khuyến cáo, bởi nó có những tiến bộ mới nhất để tối đa hóa kết nối và khả năng phục hồi khi gặp sự cố.
				</div><a id="id-1.14.11.14.7.3" class="indexterm"></a><div class="para">
					Xem tập tin cấu hình <code class="filename">/etc/prosody/prosody.cfg.lua</code>. Điều quan trọng nhất để làm là chèn những JID của những người sử dụng được cho phép quản lý máy phục vụ.
				</div><pre class="programlisting">
admins = { "joe@falcot.com" }</pre><div class="para">
					Một tập tin cấu hình cũng cần thiết cho mỗi miền máy tính. Sao chép mẫu sau từ <code class="filename">/etc/prosody/conf.avail/example.com.cfg.lua</code> và sử dụng nó như một điểm khởi động. Đây là <code class="literal">falcot.com.cfg.lua</code>:
				</div><pre class="programlisting">
VirtualHost "falcot.com"
        enabled = true
        ssl = {
                key = "/etc/ssl/private/falcot.com-key.pem";
                certificate = "/etc/ssl/public/falcot.com.pem";
                }</pre><div class="para">
					Để kích hoạt miền máy tính, phải có một đường dẫn tượng trưng (symbolic link) xuất phát từ <code class="filename">/etc/prosody/conf.d/</code>. Hãy tạo nó theo cách đó:
				</div><pre class="screen"><code class="computeroutput"># </code><strong class="userinput"><code>ln -s /etc/prosody/conf.avail/falcot.com.cfg.lua /etc/prosody/conf.d/</code></strong></pre><div class="para">
					Khởi động lại dịch vụ để sử dụng cấu hình mới.
				</div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a xmlns="" id="sect.xmpp-server-management"></a>11.8.4.2. Quản lý một máy phục vụ XMPP</h4></div></div></div><div class="para">
					Một số tác vụ quản lý có thể được thực hiện bằng tiện ích dòng lệnh <code class="literal">prosodyctl</code>. Ví dụ, để thêm một tài khoản quản trị viên vốn được chỉ định trong <code class="filename">/etc/prosody/prosody.cfg.lua</code>:
				</div><pre class="programlisting">
# prosodyctl adduser joe@falcot.com</pre><div class="para">
					Xem <a href="http://prosody.im/doc/configure"> Tài liệu hướng dẫn trên mạng của Prosody</a> để biết thêm chi tiết về cách để tùy chỉnh cấu hình này.
				</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.rtc-port-443"></a>11.8.5. Chạy các dịch vụ trên cổng 443</h3></div></div></div><div class="para">
				Một vài quản trị viên thích sử dụng tất cả các dịch vụ RTC trên cổng 443. Điều này có thể giúp người sử dụng kết nối từ những địa điểm xa xôi như các khách sạn và sân bay nơi mà các cổng khác bị khóa hay đường truyền Internet bị điều hướng xuyên qua các máy phục vụ chuyển hướng HTTP.
			</div><div class="para">
				Để xử dụng chiến thuật này, mỗi dịch vụ (SIP, XMPP và TURN) cần một địa chỉ IP riêng biệt. Tất cả các dịch vụ này có thể nằm trên cùng một máy bởi Linux hỗ trợ nhiều địa chỉ IP cho một máy tính duy nhất. Cổng số 443 phải được chỉ định trong các tập tin cấu hình cho mỗi tiến trình và cũng như trong các mẩu tin DNS SRV.
			</div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="sect.rtc-webrtc"></a>11.8.6. Adding WebRTC</h3></div></div></div><div class="para">
				Falcot wants to let customers make phone calls directly from the web site. The Falcot administrators also want to use WebRTC as part of their disaster recovery plan, so staff can use web browsers at home to log in to the company phone system and work normally in an emergency.
			</div><a id="id-1.14.11.16.3" class="indexterm"></a><a id="id-1.14.11.16.4" class="indexterm"></a><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>IN PRACTICE</em></span> Try WebRTC</strong></p></div></div></div><a id="id-1.14.11.16.5.2" class="indexterm"></a><div class="para">
				If you have not tried WebRTC before, there are various sites that give an online demonstration and test facilities. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://www.sip5060.net/test-calls">http://www.sip5060.net/test-calls</a></div>
			</div></div><div class="para">
				WebRTC is a rapidly evolving technology and it is essential to use packages from the <span class="distribution distribution">jessie-backports</span> or <span class="distribution distribution">Testing</span> distributions.
			</div><div class="para">
				JSCommunicator is a generic, unbranded WebRTC phone that does not require any server-side scripting such as PHP. It is built exclusively with HTML, CSS and JavaScript. It is the basis for many other WebRTC services and modules for more advanced web publishing frameworks. <div xmlns="" class="url">→ <a xmlns="http://www.w3.org/1999/xhtml" href="http://jscommunicator.org">http://jscommunicator.org</a></div>
			</div><a id="id-1.14.11.16.8" class="indexterm"></a><div class="para">
				The package <span class="pkg pkg">jscommunicator-web-phone</span> is the quickest way to install a WebRTC phone into a web site. It requires a SIP proxy with a WebSocket transport. The instructions in <a class="xref" href="sect.rtc-services.html#sect.sip-server-install">Phần 11.8.3.1, “Cài đặt một trạm chuyển phát SIP”</a> include the necessary details to enable the WebSocket transport in the <span class="pkg pkg">repro</span> SIP proxy.
			</div><div class="para">
				After installing <span class="pkg pkg">jscommunicator-web-phone</span>, there are various ways to use it. A simple strategy is to include or copy the configuration from <code class="filename">/etc/jscommunicator-web-phone/apache.conf</code> into an Apache virtual host configuration.
			</div><div class="para">
				Once the web-phone files are available in the web server, customize the <code class="filename">/etc/jscommunicator-web-phone/config.js</code> to point at the TURN server and SIP proxy. For example:
			</div><pre class="programlisting">
JSCommSettings = {

  // Web server environment
  webserver: {
    url_prefix: null            // If set, prefix used to construct sound/ URLs
  },

  // STUN/TURN media relays
  stun_servers: [],
  turn_servers: [
    { server:"turn:turn-server.falcot.com?transport=udp", username:"joe", password:"j0Ep455d" }
  ],

  // WebSocket connection
  websocket: {
      // Notice we use the falcot.com domain certificate and port 8443
      // This matches the Transport3 and Transport4 example in
      // the falcot.com repro.config file
    servers: 'wss://falcot.com:8443',
    connection_recovery_min_interval: 2,
    connection_recovery_max_interval: 30
  },

  ...
</pre><div class="para">
				More advanced click-to-call web sites typically use server-side scripting to generate the <code class="literal">config.js</code> file dynamically. The <a href="http://drucall.org">DruCall</a> source code demonstrates how to do this with PHP.
			</div><a id="id-1.14.11.16.14" class="indexterm"></a><div class="para">
				This chapter sampled only a fraction of the available server software; however, most of the common network services were described. Now it is time for an even more technical chapter: we'll go into deeper detail for some concepts, describe massive deployments and virtualization.
			</div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.ldap-directory.html"><strong>Trước đó</strong>11.7. Danh bạ LDAP</a></li><li class="up"><a accesskey="u" href="#"><strong>Lên</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Đầu</strong></a></li><li class="next"><a accesskey="n" href="advanced-administration.html"><strong>Kế tiếp</strong>Chương 12. Advanced Administration</a></li></ul></body></html>