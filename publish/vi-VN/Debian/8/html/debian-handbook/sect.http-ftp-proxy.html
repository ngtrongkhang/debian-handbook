<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>11.6. Trạm chuyển hướng HTTP/FTP</title><meta name="generator" content="publican v4.3.2"/><meta name="keywords" content="Postfix, Apache, NFS, Samba, Squid, OpenLDAP, SIP"/><link rel="prev" href="sect.windows-file-server-with-samba.html" title="11.5. Cài đặt các chia sẻ Windows với Samba"/><link rel="next" href="sect.ldap-directory.html" title="11.7. LDAP Directory"/><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.http-ftp-proxy.html"/></head><body onLoad="initSwitchery(); jQuery(&quot;#poptoc&quot;).load('index.html .toc:eq(0)'); jQuery('.programlisting').each(function(i, block){hljs.highlightBlock(block);});" onClick="hide('poptoc');"><header><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.windows-file-server-with-samba.html"><strong>Trước đó</strong></a></li><li class="home" onClick="work=1;showhide('poptoc');">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.ldap-directory.html"><strong>Kế tiếp</strong></a></li></ul></header><div id="poptoc" class="hidden"> </div><section class="section" id="sect.http-ftp-proxy"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.http-ftp-proxy"/>11.6. Trạm chuyển hướng HTTP/FTP</h2></div></div></div>
		
		 <p>
			Một trạm chuyển hướng HTTP/FTP hoạt động như một bên trung gian cho các kết nối HTTP và/hoặc FTP. Vai trò của nó có hai mặt:
		</p>
		 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
				<p>
					Bộ nhớ tạm thời: các tài liệu được tải về gần đây được sao chép nội bộ, vốn tránh được sự trùng lặp trong việc tải xuống.
				</p>

			</li><li class="listitem">
				<p>
					Máy phục vụ cho việc lọc: nếu bắt buộc phải dùng trạm chuyển hướng (và các kết nối đi ra bên ngoài bị chặn trừ khi chúng đi thông qua trạm chuyển hướng), trạm chuyển hướng có thể quyết định một yêu cầu có được chấp thuận hay không.
				</p>

			</li></ul></div>
		 <a id="id-1.14.9.4" class="indexterm"></a>
		 <a id="id-1.14.9.5" class="indexterm"></a>
		 <p>
			Công ty Falcot đã lựa chọn Squid làm máy phục vụ trạm chuyển hướng của họ.
		</p>
		 <a id="id-1.14.9.7" class="indexterm"></a>
		 <section class="section" id="id-1.14.9.8"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.14.9.8"/>11.6.1. Cài đặt</h3></div></div></div>
			
			 <p>
				Gói phần mềm Debian <span class="pkg pkg">squid3</span> chỉ chứa trạm chuyển hướng có cấu hình mô-đun (có bộ nhớ tạm). Biến nó thành một máy phục vụ lọc buộc phải cài đặt thêm gói phần mềm <span class="pkg pkg">squidguard</span>. Ngoài ra, <span class="pkg pkg">squid-cgi</span> cung cấp một giao diện truy xuất và quản trị cho một trạm trung chuyển Squid.
			</p>
			 <p>
				Trước khi cài đặt, phải cẩn thận kiểm tra xem hệ thống có nhận diện được tên đầy đủ của nó không: lệnh <span class="command"><strong>hostname -f</strong></span> phải trả về một tên đầy đủ (bao gồm cả tên miền). Nếu không, tập tin <code class="filename">/etc/hosts</code> phải được sửa đổi để chứa tên đầy đủ của hệ thống (ví dụ, <code class="literal">arrakis.falcot.com</code>). Tên chính thức của máy tính nên được kiểm tra với nhà quản trị mạng để tránh xung đột tên có thể có.
			</p>

		</section>
		 <section class="section" id="id-1.14.9.9"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.14.9.9"/>11.6.2. Cấu hình một Bộ nhớ tạm thời</h3></div></div></div>
			
			 <p>
				Kích hoạt tính năng bộ nhớ tạm thời chỉ đơn giản là chỉnh sửa tập tin cấu hình <code class="filename">/etc/squid3/squid.conf</code> và cho phép các máy tính từ miền nội bộ chạy các truy xuất thông qua trạm chuyển hướng. Ví dụ sau cho thấy những thay đổi được tạo ra bởi các nhà quản trị hệ thống của Công ty Falcot:
			</p>
			 <div class="example" id="id-1.14.9.9.3"><a xmlns="" id="id-1.14.9.9.3"/><p class="title"><strong>Ví dụ 11.25. Tập tin <code class="filename">/etc/squid3/squid.conf</code> (những trích đoạn)</strong></p><div class="example-contents">
				
				 
<pre class="programlisting">
# CHÈN NHỮNG QUY TẮC CỦA BẠN VÀO ĐÂY ĐỂ CHO PHÉP CÁC CHƯƠNG TRÌNH KHÁCH TRUY CẬP

# Quy tắc ví dụ cho phép truy cập từ những mạng nội bộ. Chỉnh sửa nó
# để liệt kê các mạng IP nội bộ của bạn nơi mà hành động duyệt nên được
# cho phép
acl our_networks src 192.168.1.0/24 192.168.2.0/24
http_access allow our_networks
http_access allow localhost
# Và cuối cùng từ chối tất các truy cập khác đến trạm chuyển hướng này
http_access deny all</pre>

			</div></div>

		</section>
		 <section class="section" id="id-1.14.9.10"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.14.9.10"/>11.6.3. Cấu hình một Bộ lọc</h3></div></div></div>
			
			 <p>
				<span class="command"><strong>squid</strong></span> bản thân nó không thực hiện lọc; hành động này được chuyển cho <span class="command"><strong>squidGuard</strong></span>. Cái đầu tiên phải được cấu hình để tương tác với cái sau. Điều này bao gồm thêm chỉ thị sau vào tập tin <code class="filename">/etc/squid3/squid.conf</code>:
			</p>
			 <a id="id-1.14.9.10.3" class="indexterm"></a>
			 
<pre class="programlisting">
url_rewrite_program /usr/bin/squidGuard -c /etc/squid3/squidGuard.conf</pre>
			 <p>
				Chương trình CGI <code class="filename">/usr/lib/cgi-bin/squidGuard.cgi</code> cũng cần được cài đặt, sử dụng <code class="filename">/usr/share/doc/squidguard/examples/squidGuard.cgi.gz</code> làm điểm khởi động. Các điều chỉnh bắt buộc với đoạn kịch bản này là các biến <code class="varname">$proxy</code> và <code class="varname">$proxymaster</code> (tên của trạm chuyển hướng và địa chỉ thư điện tử của nhà quản trị, theo thứ tự). Các biến <code class="varname">$image</code> và <code class="varname">$redirect</code> nên chỉ đến các tấm hình đại diện cho sự từ chối yêu cầu.
			</p>
			 <p>
				Bộ lọc phải được kích hoạt với lệnh <span class="command"><strong>service squid3 reload</strong></span>. Tuy nhiên, bởi gói phần mềm <span class="pkg pkg">squidguard</span> không thực hiện lọc theo ngầm định, ra chính sách là nhiệm vụ của nhà quản trị. Điều này có thể được thực hiện bằng việc tạo tập tin <code class="filename">/etc/squid3/squidGuard.conf</code> (sử dụng <code class="filename">/etc/squidguard/squidGuard.conf.default</code> như một bản mẫu nếu bị buộc).
			</p>
			 <p>
				Cơ sở dữ liệu hiện tại phải được tái tạo lại với <span class="command"><strong>update-squidguard</strong></span> sau khi bất kỳ thay đổi nào của tập tin cấu hình <span class="command"><strong>squidGuard</strong></span> (hoặc một trong những miền máy tính hoặc các URL nó đề cập). Cú pháp của tập tin cấu hình được ghi lại trong trang web sau: <a class="ulink" href="http://www.squidguard.org/Doc/configure.html">http://www.squidguard.org/Doc/configure.html</a>
			</p>
			 <a id="id-1.14.9.10.8" class="indexterm"></a>
			 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>LỰA CHỌN THAY THẾ</em></span> DansGuardian</strong></p></div></div></div> 
			 <a id="id-1.14.9.10.9.2" class="indexterm"></a>
			 <a id="id-1.14.9.10.9.3" class="indexterm"></a>
			 <p>
				Gói phần mềm <span class="pkg pkg">dansguardian</span> là một lựa chọn thay thế cho <span class="emphasis"><em>squidguard</em></span>. Phần mềm này không đơn giản là xử lý một danh sách đen của các URL bị cấm, nhưng nó có thể tận dụng hệ thống PICS (<span class="emphasis"><em>Nền tảng cho Việc Lựa chọn Nội dung InternetPlatform for Internet Content Selection</em></span>) để quyết định một trang web có thể chấp nhận được bởi quá trình phân tích động của những nội dung của nó.
			</p>
			 </div>
		</section>

	</section><footer/></body></html>