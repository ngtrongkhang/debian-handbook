<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>6.8. Tự động nâng cấp</title><meta name="generator" content="publican v4.3.2"/><meta name="keywords" content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom"/><link rel="prev" href="sect.regular-upgrades.html" title="6.7. Đảm bảo một hệ thống luôn cập nhật"/><link rel="next" href="sect.searching-packages.html" title="6.9. Tìm gói"/><link xmlns="" rel="canonical" href="https://debian-handbook.info/browse/vi-VN/stable/sect.automatic-upgrades.html"/></head><body onLoad="initSwitchery(); jQuery(&quot;#poptoc&quot;).load('index.html .toc:eq(0)'); jQuery('.programlisting').each(function(i, block){hljs.highlightBlock(block);});" onClick="hide('poptoc');"><header><div id="banner"><a href="http://debian-handbook.info/get/"><span class="text">Download the ebook</span></a></div><ul class="docnav top"><li class="previous"><a accesskey="p" href="sect.regular-upgrades.html"><strong>Trước đó</strong></a></li><li class="home" onClick="work=1;showhide('poptoc');">Sổ tay Quản trị Debian</li><li class="next"><a accesskey="n" href="sect.searching-packages.html"><strong>Kế tiếp</strong></a></li></ul></header><div id="poptoc" class="hidden"> </div><section class="section" id="sect.automatic-upgrades"><div class="titlepage"><div><div><h2 class="title"><a xmlns="" id="sect.automatic-upgrades"/>6.8. Tự động nâng cấp</h2></div></div></div>
		
		 <a id="id-1.9.17.2" class="indexterm"></a>
		 <a id="id-1.9.17.3" class="indexterm"></a>
		 <p>
			Vì Falcot Corp có nhiều máy tính nhưng chỉ có giới hạn nhân lực, nên các quản trị viên cố gắng nâng cấp càng nhiều càng tốt. Các chương trình phụ trách các quá trình này do đó phải chạy mà không có sự can thiệp của con người.
		</p>
		 <section class="section" id="id-1.9.17.5"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.9.17.5"/>6.8.1. Cấu hình <span class="command"><strong>dpkg</strong></span></h3></div></div></div>
			
			 <p>
				Như đã đề cập ở trên, <span class="command"><strong>dpkg</strong></span> có thể được tùy chọn không yêu cầu xác nhận khi thay thế tệp tin cấu hình (với tùy chọn <code class="literal"> - force-confdef --force-confold</code>). Tương tác có thể có ba nguồn khác: một số đến từ chính APT, một số được quản lý bởi <span class="command"><strong>debconf</strong></span>, và một số xảy ra trên dòng lệnh do các tập lệnh cấu hình gói.
			</p>

		</section>
		 <section class="section" id="id-1.9.17.6"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.9.17.6"/>6.8.2. Cấu hình APT</h3></div></div></div>
			
			 <p>
				Trường hợp của APT rất đơn giản: tùy chọn <code class="literal">-y</code> (hoặc <code class="literal">--assum-yes</code>) cho APT biết câu trả lời cho tất cả các câu hỏi là “có“.
			</p>

		</section>
		 <section class="section" id="id-1.9.17.7"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.9.17.7"/>6.8.3. Cấu hình <span class="command"><strong>debconf</strong></span></h3></div></div></div>
			
			 <p>
				Trường hợp của <span class="command"><strong>debconf</strong></span> cần được cung cấp thêm chi tiết. Chương trình này đã được thiết kế để kiểm soát sự liên quan và số lượng của câu hỏi được hiển thị cho người dùng, cũng như cách chúng được hiển thị. Đó là lý do tại sao cấu hình yêu cầu một sự ưu tiên tối thiểu cho các câu hỏi; Chỉ những câu hỏi trên mức ưu tiên tối thiểu được hiển thị. <span class="command"><strong>debconf</strong></span> giả định câu trả lời mặc định (được xác định bởi người duy trì gói) đối với các câu hỏi mà nó quyết định bỏ qua.
			</p>
			 <p>
				Thành phần cấu hình có liên quan khác là giao diện được sử dụng bởi giao diện người dùng. Nếu bạn chọn <code class="literal">noninteractive</code> trong số các lựa chọn, tất cả tương tác người dùng sẽ bị vô hiệu hoá. Nếu một gói cố gắng hiển thị một lưu ý thông tin, nó sẽ được gửi tới quản trị viên qua email.
			</p>
			 <p>
				Để định cấu hình lại <span class="command"><strong>debconf</strong></span>, hãy sử dụng công cụ <span class="command"><strong>dpkg-reconfigure</strong></span> từ gói <span class="pkg pkg">debconf</span>; Lệnh có liên quan là <span class="command"><strong>dpkg-cấu hình lại debconf</strong></span>. Lưu ý rằng các giá trị được cấu hình có thể được tạm thời ghi đè bằng các biến môi trường khi cần thiết (ví dụ: <code class="varname">DEBIAN_FRONTEND</code> điều khiển giao diện, như đã được ghi lại trong trang hướng dẫn sử dụng. <span class="citerefentry"><span class="refentrytitle">debconf</span>
				(7)</span>).
			</p>

		</section>
		 <section class="section" id="id-1.9.17.8"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.9.17.8"/>6.8.4. Xử lý tương tác dòng lệnh</h3></div></div></div>
			
			 <p>
				Nguồn cuối cùng của các tương tác, và hầu như cần phải có, là các tập lệnh cấu hình được chạy bởi <span class="command"><strong>dpkg</strong></span>. Không may là không có giải pháp tiêu chuẩn, và không có câu trả lời luôn luôn tốt nhất.
			</p>
			 <p>
				Cách tiếp cận phổ biến là để ngăn chặn các đầu vào tiêu chuẩn bằng cách chuyển hướng nội dung trống của <code class="filename">/dev/null</code> vào nó với <span class="command"><strong><em class="replaceable">command</em> &lt;/dev/ null</strong></span> hoặc để cung cấp cho nó với một số lượng bất tận các dòng mới. Không có phương pháp nào trong số này là 100% đáng tin cậy nhưng thường dẫn đến các câu trả lời mặc định đang được sử dụng, vì hầu hết các kịch bản đều xem xét việc thiếu câu trả lời như là sự chấp nhận giá trị mặc định.
			</p>

		</section>
		 <section class="section" id="id-1.9.17.9"><div class="titlepage"><div><div><h3 class="title"><a xmlns="" id="id-1.9.17.9"/>6.8.5. Kết hợp Hoàn hảo</h3></div></div></div>
			
			 <p>
				Bằng cách kết hợp các thành phần đã nêu, có thể thiết kế một kịch bản nhỏ nhưng đáng tin cậy có thể xử lý các nâng cấp tự động.
			</p>
			 <div class="example" id="example.non-interactive-upgrade"><a xmlns="" id="example.non-interactive-upgrade"/><p class="title"><strong>Ví dụ 6.4. Tập lệnh nâng cấp không tương tác</strong></p><div class="example-contents">
				
				 
<pre class="programlisting">export DEBIAN_FRONTEND=noninteractive
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</pre>

			</div></div>
			 <div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong><span class="emphasis"><em>TRONG THỰC HÀNH</em></span> Trường hợp của Falcot Corp</strong></p></div></div></div> 
			 <p>
				Các máy tính Falcot là một hệ thống không đồng nhất, với các máy có các chức năng khác nhau. Do đó, các quản trị viên sẽ chọn giải pháp phù hợp nhất cho mỗi máy tính.
			</p>
			 <p>
				Trong thực tế, các máy chủ chạy <span class="distribution distribution">Jessie</span> được cấu hình với sự kết hợp hoàn hảo ở trên và được cập nhật tự động. Chỉ những máy chủ quan trọng nhất (tường lửa, đối với trường hợp) được thiết lập với <span class="command"><strong>apticron</strong></span>, do đó việc nâng cấp luôn diễn ra dưới sự giám sát của quản trị viên.
			</p>
			 <p>
				Các máy trạm văn phòng trong các dịch vụ hành chính cũng chạy <span class="distribution distribution">Jessie</span>, nhưng chúng được trang bị <span class="pkg pkg">gnome-packagekit</span>, do đó người dùng tự kích hoạt bản nâng cấp. Lý do của quyết định này là nếu nâng cấp xảy ra mà không có hành động rõ ràng thì hành vi của máy tính có thể thay đổi bất ngờ, điều này có thể gây nhầm lẫn cho người dùng chính.
			</p>
			 <p>
				Trong phòng thí nghiệm, một số máy tính sử dụng <span class="distribution distribution">Testing</span> - để tận dụng các phiên bản phần mềm mới nhất - cũng không được nâng cấp tự động. Quản trị viên chỉ cấu hình APT để chuẩn bị nâng cấp nhưng không ban hành; Khi họ quyết định nâng cấp (thủ công) thì sẽ tránh được những phần tẻ nhạt trong danh sách gói tải xuống và gói tải xuống và quản trị viên có thể tập trung vào phần thực sự hữu ích.
			</p>
			 </div>
		</section>

	</section><footer/></body></html>